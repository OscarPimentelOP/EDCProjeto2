{% extends "layout.html" %}
{% load static %}
{% block content %}

<header class="poke-nav">
    <!-- previus pokemon -->
        <div  id="prev" class="button">
            <svg class="arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"/></svg>
            Previous
        </div>
        <div class="name">
                <span>{{general_info.name}} {{general_info.pokedex_entry}}</span>
        </div>
        <div id="next" class="button">
            Next
            <svg class="arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"/></svg>
        </div>
    <!-- next pokemon -->   
</header>

<section class="info" xmlns:pok="http://edcpokedex.org/" xmlns:pokpred="http://edcpokedex.org/pred" typeof="pok:Pokemon" about="pok:pokemon/{{ general_info.name }}">

    <div class="card-holder">
        <div class="image-holder">
            <img property="pok:art" src="{{ general_info.art }}"
                alt="NOT FOUND">
        </div>
    </div>

    <div class="information">
        <div class="description">
            <p property="pok:description">
                {{ general_info.description }}
            </p>
        </div>

        <div class="basic-info">
            <div class="slot">
                <h3>Height (decimeter)</h3>
                <p property="pok:height">{{ general_info.height }}</p>
            </div>
            <div class="slot">
                <h3>Weight (hectogram)</h3>
                <p property="pok:weight">{{ general_info.weight }}</p>
            </div>
            <div class="slot" rel="pok:pred/category">
                <h3>Category</h3>
                <p about="pok:category/{{ category }}" property="pok:category/name">{{ category }}</p>
            </div>
            <div class="slot" rel="pok:pred/ability">
                <h3>Abilities</h3>
                <div class="habilities">
                    {% for ability in abilities %}
                    <div about="pok:ability/{{ ability.name }}" class="hability">
                        <p property="pok:pred/name" >{{ ability.name }}</p>
                        <div class="tooltip">
                            <h3> {{ ability.name }} </h3>
                            <p property="pok:pred/description">
                                {{ ability.description }}
                            </p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                

            </div>
        </div>
    </div>

    <div class="pokemon-stats">
        <h3>Stats</h3>
        <div class="stats">
            <div class="stat">
                <div resource="pok:hp" class="value-list" data-value="{{ general_info.hp }}">
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                </div>
                <span class="name">HP</span>
            </div>
            <div class="stat">
                <div resource="pok:attack" class="value-list" data-value="{{ general_info.attack }}">
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                </div>
                <span class="name">ATTACK</span>
            </div>
            <div class="stat">
                <div resource="pok:defense" class="value-list" data-value="{{ general_info.defense }}">
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                </div>
                <span class="name">DEFENSE</span>
            </div>
            <div class="stat">
                <div resource="pok:special_attack" class="value-list" data-value="{{ general_info.special_attack }}">
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                </div>
                <span class="name">SPECIAL ATTACK</span>
            </div>
            <div class="stat">
                <div resource="pok:special_defense" class="value-list" data-value="{{ general_info.special_defense }}">
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                </div>
                <span class="name">SPECIAL DEFENSE</span>
            </div>
            <div class="stat">
                <div resource="pok:speed" class="value-list" data-value="{{ general_info.speed }}">
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                    <span class="value"></span>
                </div>
                <span class="name">SPEED</span>
            </div>
        </div>
    </div>

    <div class="types">
        <h3>Types</h3>
        <div class="types-box" rel="pok:pred/type">
            {% for type in types %}
                <div class="type">
                    <span about="pok:type/{{ type }}" property="pok:pred/name">{{ type }}</span>
                </div>
            {% endfor %}
        </div>
        <h3>Weakness</h3>
        <div class="types-box">
            {% for weak in weaknesses%}
            <div class="type">
            <a href="/?type={{ weak }}">
                <span about="pok:type/{{ types.0 }}" property="pok:pred/weakness">{{ weak }}</span>
            </a>
            </div>
        {% endfor %}
        </div>
        <h3>Strengths</h3>
        <div class="types-box">
            {% for strength in strengths%}
            <div class="type">
            <a href="/?type={{ strength }}">
                <span about="pok:type/{{ types.0 }}"  property="pok:pred/super_effective">{{ strength }}</span>
            </a>
            </div>
        {% endfor %}
        </div>
    </div>
</section>

<section class="evolutions" xmlns:pok="http://edcpokedex.org/" xmlns:pokpred="http://edcpokedex.org/pred" typeof="pok:Pokemon" about="pok:pokemon/{{ evolutions.first.0.name }}">

    <div class="evalution">
        {% for value in evolutions.first %}
        <div class="card">
            <a href="/pokemon/{{ value.id }}">
                <img src="{{ value.art }}" alt=""></img>
            </a>
            <h3 property="pok:pred/name">{{ value.name }}</h3>
        </div>
        {% endfor %}
    </div>

    {% if evolutions.second  %}
    <svg class="arrow" xmlns="http://www.w3.org/2000/svg"  width="48"
    height="48" viewBox="0 0 24 24">
        <path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"/></svg>
    {% endif %}

    <div class="evalution" rel="pok:pred/evolves_to">
        {% for value in evolutions.second %}
        <div class="card" about="pok:pokemon/{{ value.name }}">
            <a href="/pokemon/{{ value.id }}">
                <img src="{{ value.art }}" alt=""></img>
            </a>
            <h3 property="pok:pred/name">{{ value.name }}</h3>
        </div>
        {% endfor %}
    </div>

    {% if evolutions.third  %}
    <svg class="arrow" xmlns="http://www.w3.org/2000/svg" width="48"
    height="48" viewBox="0 0 24 24">
        <path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"/></svg>
    {% endif %}
        
    <div class="evalution" about="pok:pokemon/{{ evolutions.second.0.name }}" rel="pok:pred/evolves_to">
        {% for value in evolutions.third %}
        <div class="card" about="pok:pokemon/{{ value.name }}" typeof="pok:Pokemon">
            <a href="/pokemon/{{ value.id }}">
                <img src="{{ value.art }}" alt=""></img>
            </a>
            <h3 property="pok:pred/name">{{ value.name }}</h3>
        </div>
        {% endfor %}
    </div>
   
</section>

<script type="text/javascript">
    $('.value-list').each(function (key, bar) {
        var value = $(this).data('value');
        var result = Math.ceil(value * 0.06);
        $(this).children().each(function (key, bar) {   
                if (key < result) {
                    $(bar).delay(200*key).animate(
                        { opacity: 1 },
                    )
                };
        })
    })
</script>

<script type="text/javascript">
    
    var index = "{{general_info.pokedex_entry}}"
    
    var handler = function (index,next){
        if(!next)
            index--;
        else
            index++;
        
        if(index<1) index = 721;
        else if(index>721) index = 1;

        var url = window.location.href.split("/");
        url[4] = index;
        window.location.href = url.join("/");
    }

    $("#prev").click(function(){
        handler(index,false)
    });
    $("#next").click(function(){
        handler(index,true)
    });

</script>

{% endblock %}
